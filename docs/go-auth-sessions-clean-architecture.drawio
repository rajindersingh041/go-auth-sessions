<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-11-10T22:00:00.000Z" agent="5.0" etag="abc123" version="24.7.17" type="device">
  <diagram name="Go-Auth-Sessions-Clean-Architecture" id="workflow">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Go Auth Sessions - Clean Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="369" height="30" as="geometry" />
        </mxCell>
        
        <!-- Client Layer -->
        <mxCell id="client" value="Client Applications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="80" width="269" height="40" as="geometry" />
        </mxCell>
        
        <!-- HTTP Requests -->
        <mxCell id="httpRequests" value="HTTP Requests&#xa;POST /register, POST /login&#xa;GET /orders/{user}, POST /orders/{user}&#xa;GET /health" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="140" width="169" height="60" as="geometry" />
        </mxCell>
        
        <!-- HTTP Layer -->
        <mxCell id="httpLayer" value="HTTP Layer (Handlers)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="220" width="1069" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Handler -->
        <mxCell id="userHandler" value="User Handler&#xa;user/handler.go&#xa;â€¢ Register()&#xa;â€¢ Login()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="280" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Order Handler -->
        <mxCell id="orderHandler" value="Order Handler&#xa;order/handler.go&#xa;â€¢ CreateOrder()&#xa;â€¢ GetOrders()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="280" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Health Handler -->
        <mxCell id="healthHandler" value="Health Handler&#xa;main.go&#xa;â€¢ HealthCheck()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="480" y="280" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Middleware -->
        <mxCell id="middleware" value="Middleware&#xa;â€¢ Logging&#xa;â€¢ Recovery&#xa;â€¢ CORS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="680" y="280" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Container -->
        <mxCell id="container" value="Dependency Injection Container&#xa;container.go&#xa;â€¢ UserService â€¢ OrderService&#xa;â€¢ JWTManager â€¢ PasswordHasher" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="280" width="200" height="80" as="geometry" />
        </mxCell>
        
        <!-- Service Layer -->
        <mxCell id="serviceLayer" value="Service Layer (Business Logic)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="1069" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Service -->
        <mxCell id="userService" value="User Service&#xa;user/service.go&#xa;â€¢ CreateUser()&#xa;â€¢ AuthenticateUser()&#xa;â€¢ GetUserByUsername()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="460" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Order Service -->
        <mxCell id="orderService" value="Order Service&#xa;order/service.go&#xa;â€¢ CreateOrder()&#xa;â€¢ GetOrdersByUserID()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="460" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Auth Components -->
        <mxCell id="authComponents" value="Auth Components&#xa;auth/auth.go&#xa;â€¢ JWTManager&#xa;â€¢ PasswordHasher&#xa;â€¢ Token Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="480" y="460" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Repository Layer -->
        <mxCell id="repositoryLayer" value="Repository Layer (Data Access)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="580" width="1069" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Repository Interface -->
        <mxCell id="userRepoInterface" value="User Repository&#xa;Interface&#xa;user/models.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="640" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- ClickHouse User Repo -->
        <mxCell id="clickhouseUserRepo" value="ClickHouse&#xa;User Repository&#xa;user/repository_clickhouse.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="720" width="80" height="70" as="geometry" />
        </mxCell>
        
        <!-- PostgreSQL User Repo -->
        <mxCell id="postgresUserRepo" value="PostgreSQL&#xa;User Repository&#xa;user/repository_postgres.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="140" y="720" width="80" height="70" as="geometry" />
        </mxCell>
        
        <!-- Order Repository Interface -->
        <mxCell id="orderRepoInterface" value="Order Repository&#xa;Interface&#xa;order/models.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="640" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- ClickHouse Order Repo -->
        <mxCell id="clickhouseOrderRepo" value="ClickHouse&#xa;Order Repository&#xa;order/repository_clickhouse.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="250" y="720" width="80" height="70" as="geometry" />
        </mxCell>
        
        <!-- PostgreSQL Order Repo -->
        <mxCell id="postgresOrderRepo" value="PostgreSQL&#xa;Order Repository&#xa;order/repository_postgres.go" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="340" y="720" width="80" height="70" as="geometry" />
        </mxCell>
        
        <!-- Database Layer -->
        <mxCell id="databaseLayer" value="Database Layer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="640" width="439" height="40" as="geometry" />
        </mxCell>
        
        <!-- ClickHouse DB -->
        <mxCell id="clickhouseDB" value="ClickHouse Database&#xa;â€¢ users table&#xa;â€¢ orders table&#xa;Port: 9000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="700" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- PostgreSQL DB -->
        <mxCell id="postgresDB" value="PostgreSQL Database&#xa;â€¢ users table&#xa;â€¢ orders table&#xa;Port: 5432" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="700" y="700" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Environment Config -->
        <mxCell id="envConfig" value="Environment Config&#xa;DB_DRIVER&#xa;(postgres/clickhouse)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="720" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Arrows and Connections -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="client" target="httpRequests">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="584" y="120" as="sourcePoint" />
            <mxPoint x="584" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="httpRequests" target="httpLayer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="584" y="200" as="sourcePoint" />
            <mxPoint x="584" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="userHandler" target="userService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="150" y="360" as="sourcePoint" />
            <mxPoint x="150" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="orderHandler" target="orderService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="360" as="sourcePoint" />
            <mxPoint x="350" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="userService" target="userRepoInterface">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="130" y="550" as="sourcePoint" />
            <mxPoint x="130" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="orderService" target="orderRepoInterface">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="330" y="550" as="sourcePoint" />
            <mxPoint x="330" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow7" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="userRepoInterface" target="clickhouseUserRepo">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="700" as="sourcePoint" />
            <mxPoint x="90" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow8" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="userRepoInterface" target="postgresUserRepo">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="150" y="700" as="sourcePoint" />
            <mxPoint x="180" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow9" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="orderRepoInterface" target="clickhouseOrderRepo">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="700" as="sourcePoint" />
            <mxPoint x="290" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow10" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="orderRepoInterface" target="postgresOrderRepo">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="700" as="sourcePoint" />
            <mxPoint x="380" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow11" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="clickhouseUserRepo" target="clickhouseDB">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="130" y="750" as="sourcePoint" />
            <mxPoint x="500" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow12" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="postgresUserRepo" target="postgresDB">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="750" as="sourcePoint" />
            <mxPoint x="700" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow13" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="clickhouseOrderRepo" target="clickhouseDB">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="330" y="750" as="sourcePoint" />
            <mxPoint x="500" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow14" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" source="postgresOrderRepo" target="postgresDB">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="750" as="sourcePoint" />
            <mxPoint x="700" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Configuration Arrow -->
        <mxCell id="configArrow" value="Configures" style="endArrow=classic;html=1;rounded=0;strokeColor=#d6b656;" edge="1" parent="1" source="envConfig" target="container">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="940" y="720" as="sourcePoint" />
            <mxPoint x="980" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="Legend:&#xa;ðŸŸ¢ Handlers (HTTP Layer)&#xa;ðŸŸ¡ Services (Business Logic)&#xa;ðŸŸ£ Repositories (Data Access)&#xa;ðŸ”µ Databases&#xa;ðŸŸ  Configuration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="950" y="80" width="150" height="100" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>